---
import Layout from '../layouts/Layout.astro';
import PostCalendarReact from '../components/PostCalendarReact.jsx';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');

// Reactコンポーネントに渡すためのデータを整形
const formattedPosts = posts.map((post: { id: any; data: { title: any; description: any; pubDate: any; }; }) => ({
  id: post.id,
  data: {
    title: post.data.title,
    description: post.data.description,
    pubDate: post.data.pubDate,
  }
}));
---

<Layout title="投稿カレンダー - Daily Scraps" description="投稿カレンダー">
  <main>
    <!-- client:loadで即座にインタラクティブに -->
    <PostCalendarReact client:load posts={formattedPosts} />
  </main>
</Layout>

<style>
  main {
    min-height: 100vh;
    background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);
  }
</style>